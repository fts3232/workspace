var alertMessageTimer=null;function alertMessage(e,g,h){h=typeof h=="undefined"?true:h;clearTimeout(alertMessageTimer);$(".alert").removeClass("alert-success alert-danger alert-info alert-warning");var f;switch(e){case"success":f="alert-success";break;case"danger":f="alert-danger";break;case"warning":f="alert-warning";break;case"info":f="alert-info";break}$(".alert").addClass("in").addClass(f).removeClass("out");$(".alert p").html(g);if(h){alertMessageTimer=setTimeout(function(){$(".alert").removeClass("in").addClass("out")},3000)}}function alertSuccessMessage(c,d){alertMessage("success",c,d)}function alertErrorMessage(f,e,d){if(typeof e!="undefined"&&e!=""){f+=" 错误码: "+e}alertMessage("danger",f,d)}function pad_zero(b){return b>=10?b:"0"+b}function calculate_depth(p,o){var k=parseInt(p.prev(".ui-sortable-handle").css("marginLeft"));if(isNaN(k)){k=parseInt(p.parents("li").css("marginLeft"))}var q=parseInt(p.css("marginLeft"));var j=k+30;if(o=="right"){var m=q+30>j?j:q+30}else{var m=q-30<0?0:q-30}var n=m/30;p.attr("data-depth",n);p.css("margin-left",m+"px");if(m!=q){var l=p.find("ul").eq(0).find("li");l.map(function(a){calculate_depth(l.eq(a),o)})}}function reset_order(){var e=$(".sortable");var d=e.find("li");var f=[];d.map(function(m,n){var l=d.eq(m).attr("data-parent");if(f.indexOf(l)==-1){var a=e.find('[data-parent="'+l+'"]');a.map(function(g,h){a.eq(g).attr("data-order",g)});f.push[l]}if(l!=0){var o=e.find('[data-id="'+l+'"]');var b=o.length>0?parseInt(o.attr("data-depth"))+1:0;d.eq(m).attr("data-depth",b);d.eq(m).css("margin-left",b*30);var c=o.length>0?l:0;d.eq(m).attr("data-parent",c)}})}function reset_parent(m){var h=$(".sortable");var g=h.find('[data-id="'+m+'"]').length;var j=h.find('[data-parent="'+m+'"]');if(g==0){var l=h.find('[data-parent="'+j.eq(i).attr("id")+'"]').length;var k=j.eq(i).attr("data-depth")-1<=0?0:j.eq(i).attr("data-depth")-1;var m=j.eq(i).prev('[data-depth="0"]');m=m.length>0?m.attr("data-id"):0;j.eq(i).attr("data-parent",m);j.eq(i).attr("data-depth",k);j.eq(i).css("margin-left",k*30)}}function clone_item(d,f){var e=d.height();f.map(function(b){d.find("ul").eq(0).append(f.eq(b).clone());var a=f.eq(b).attr("data-id");e+=f.eq(b).height();f.eq(b).remove();var c=d.parent("ul").find('[data-parent="'+a+'"]');clone_item(d,c)});$(".ui-state-highlight").css("height",e+"px")}function create_category_option(f,d){var e=$('<option value="'+f.CATEGORY_ID+'">'+f.CATEGORY_NAME+"</option>");if(d==f.CATEGORY_ID){e.attr("selected",true)}return e}function create_category_select(f,e,d){d=typeof d=="undefined"?$("select.category"):d;f.map(function(b,c){var a;if(b.CATEGORY_PARENT==0){a=create_category_optgroup(b)}else{a=create_category_option(b,e)}a.appendTo(d);if(b.CHILD!=""){create_category_select(b.CHILD,e,a)}})}function create_category_optgroup(b){return $("<optgroup label='"+b.CATEGORY_NAME+"'></optgroup>")}function setCookie(h,g,f){var e=new Date();e.setDate(e.getDate()+f);document.cookie=h+"="+escape(g)+((f==null)?"":";path=/;expires="+e.toGMTString())}$(document).ready(function(){if($("body>.nav").find("a").length>0){var f=[];$("body>.nav").find("a").map(function(c){var b=location.pathname.substring(1).split("/");var h=$("body>.nav").find("a").eq(c).attr("href").substring(1).split("/");var a=0;h.map(function(g,k){if(g==b[k]){a+=25}});f.push({index:c,score:a})});var d=function(a,b){var c=a.score;var h=b.score;if(c>h){return -1}else{if(c<h){return 1}else{return 0}}};f.sort(d);var e=$("body>.nav").find("a").eq(f[0]["index"]).parents("li");e.addClass("active");if(e.length>1){e.eq(e.length-1).find("span.glyphicon").addClass("glyphicon-minus").removeClass("glyphicon-plus")}}$(".alert .close").on("click",function(){$(".alert").removeClass("in").addClass("out")});$(".header .menu a.btn").on("click",function(){var a=$("body>.nav");if(a.hasClass("out")){$("body>.container-fluid").removeClass("full");a.addClass("in").removeClass("out")}else{$("body>.container-fluid").addClass("full");a.addClass("out").removeClass("in")}});$(".header .language-list a").on("click",function(){var a=$(this).attr("data-language");setCookie("language",a,365)});$("body>.nav li").on("click",function(){var a=$(this).find(".sub-nav");if(a.length>0){if($(this).hasClass("active")){a.hide();$(this).removeClass("active");$(this).find("span.glyphicon").addClass("glyphicon-plus").removeClass("glyphicon-minus")}else{a.show();$(this).addClass("active");$(this).find("span.glyphicon").addClass("glyphicon-minus").removeClass("glyphicon-plus")}}})});