var alertMessageTimer=null;function alertMessage(b,d,c){c=typeof c=="undefined"?true:c;clearTimeout(alertMessageTimer);$(".alert").removeClass("alert-success alert-danger alert-info alert-warning");var a;switch(b){case"success":a="alert-success";break;case"danger":a="alert-danger";break;case"warning":a="alert-warning";break;case"info":a="alert-info";break}$(".alert").addClass("in").addClass(a).removeClass("out");$(".alert p").html(d);if(c){alertMessageTimer=setTimeout(function(){$(".alert").removeClass("in").addClass("out")},3000)}}function alertSuccessMessage(b,a){alertMessage("success",b,a)}function alertErrorMessage(c,a,b){if(typeof a!="undefined"&&a!=""){c+=" 错误码: "+a}alertMessage("danger",c,b)}function pad_zero(a){return a>=10?a:"0"+a}function calculate_depth(d,e){var a=parseInt(d.prev(".ui-sortable-handle").css("marginLeft"));if(isNaN(a)){a=parseInt(d.parents("li").css("marginLeft"))}var c=parseInt(d.css("marginLeft"));var b=a+30;if(e=="right"){var g=c+30>b?b:c+30}else{var g=c-30<0?0:c-30}var f=g/30;d.attr("data-depth",f);d.css("margin-left",g+"px");if(g!=c){var h=d.find("ul").eq(0).find("li");h.map(function(j){calculate_depth(h.eq(j),e)})}}function reset_order(){var a=$(".sortable");var b=a.find("li");var c=[];b.map(function(f,e){var g=b.eq(f).attr("data-parent");if(c.indexOf(g)==-1){var k=a.find('[data-parent="'+g+'"]');k.map(function(m,l){k.eq(m).attr("data-order",m)});c.push[g]}if(g!=0){var d=a.find('[data-id="'+g+'"]');var j=d.length>0?parseInt(d.attr("data-depth"))+1:0;b.eq(f).attr("data-depth",j);b.eq(f).css("margin-left",j*30);var h=d.length>0?g:0;b.eq(f).attr("data-parent",h)}})}function reset_parent(c){var a=$(".sortable");var b=a.find('[data-id="'+c+'"]').length;var f=a.find('[data-parent="'+c+'"]');if(b==0){var d=a.find('[data-parent="'+f.eq(i).attr("id")+'"]').length;var e=f.eq(i).attr("data-depth")-1<=0?0:f.eq(i).attr("data-depth")-1;var c=f.eq(i).prev('[data-depth="0"]');c=c.length>0?c.attr("data-id"):0;f.eq(i).attr("data-parent",c);f.eq(i).attr("data-depth",e);f.eq(i).css("margin-left",e*30)}}function clone_item(b,c){var a=b.height();c.map(function(e){b.find("ul").eq(0).append(c.eq(e).clone());var f=c.eq(e).attr("data-id");a+=c.eq(e).height();c.eq(e).remove();var d=b.parent("ul").find('[data-parent="'+f+'"]');clone_item(b,d)});$(".ui-state-highlight").css("height",a+"px")}function create_category_option(c,b){var a=$('<option value="'+c.CATEGORY_ID+'">'+c.CATEGORY_NAME+"</option>");if(b==c.CATEGORY_ID){a.attr("selected",true)}return a}function create_category_select(c,a,b){b=typeof b=="undefined"?$("select.category"):b;c.map(function(e,d){var f;if(e.CATEGORY_PARENT==0){f=create_category_optgroup(e)}else{f=create_category_option(e,a)}f.appendTo(b);if(e.CHILD!=""){create_category_select(e.CHILD,a,f)}})}function create_category_optgroup(a){return $("<optgroup label='"+a.CATEGORY_NAME+"'></optgroup>")}function setCookie(c,d,a){var b=new Date();b.setDate(b.getDate()+a);document.cookie=c+"="+escape(d)+((a==null)?"":";path=/;expires="+b.toGMTString())}$(document).ready(function(){var c=[];$("body>.nav").find("a").map(function(e){var f=location.pathname.substring(1).split("/");var d=$("body>.nav").find("a").eq(e).attr("href").substring(1).split("/");var g=0;d.map(function(j,h){if(j==f[h]){g+=25}});c.push({index:e,score:g})});var b=function(g,f){var e=g.score;var d=f.score;if(e>d){return -1}else{if(e<d){return 1}else{return 0}}};c.sort(b);var a=$("body>.nav").find("a").eq(c[0]["index"]).parents("li");a.addClass("active");if(a.length>1){a.eq(a.length-1).find("span.glyphicon").addClass("glyphicon-minus").removeClass("glyphicon-plus")}$(".alert .close").on("click",function(){$(".alert").removeClass("in").addClass("out")});$(".header .menu a.btn").on("click",function(){var d=$("body>.nav");if(d.hasClass("out")){$("body>.container-fluid").removeClass("full");d.addClass("in").removeClass("out")}else{$("body>.container-fluid").addClass("full");d.addClass("out").removeClass("in")}});$(".header .language-list a").on("click",function(){var d=$(this).attr("data-language");setCookie("language",d,365)});$("body>.nav li").on("click",function(){var d=$(this).find(".sub-nav");if(d.length>0){if($(this).hasClass("active")){d.hide();$(this).removeClass("active");$(this).find("span.glyphicon").addClass("glyphicon-plus").removeClass("glyphicon-minus")}else{d.show();$(this).addClass("active");$(this).find("span.glyphicon").addClass("glyphicon-minus").removeClass("glyphicon-plus")}}})});