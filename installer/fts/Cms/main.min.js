var alertMessageTimer=null;function alertMessage(c,d,a){clearTimeout(alertMessageTimer);$(".alert").removeClass("alert-success alert-danger alert-info alert-warning");var b;switch(c){case"success":b="alert-success";break;case"danger":b="alert-danger";break;case"warning":b="alert-warning";break;case"info":b="alert-info";break}$(".alert").addClass("in").addClass(b).removeClass("out");if(a!=undefined){d+=" 错误码: "+a}$(".alert p").html(d);alertMessageTimer=setTimeout(function(){$(".alert").removeClass("in").addClass("out")},3000)}function pad_zero(a){return a>=10?a:"0"+a}function calculate_depth(d,e){var a=parseInt(d.prev(".ui-sortable-handle").css("marginLeft"));if(isNaN(a)){a=parseInt(d.parents("li").css("marginLeft"))}var c=parseInt(d.css("marginLeft"));var b=a+30;if(e=="right"){var g=c+30>b?b:c+30}else{var g=c-30<0?0:c-30}var f=g/30;d.attr("data-depth",f);d.css("margin-left",g+"px");if(g!=c){var h=d.find("ul").eq(0).find("li");h.map(function(j){calculate_depth(h.eq(j),e)})}}function reset_order(){var a=$(".sortable");var b=a.find("li");var c=[];b.map(function(e,d){var f=b.eq(e).attr("data-parent");if(c.indexOf(f)==-1){var g=a.find('[data-parent="'+f+'"]');g.map(function(j,h){g.eq(j).attr("data-order",j)});c.push[f]}})}function clone_item(b,c){var a=b.height();c.map(function(e){b.find("ul").eq(0).append(c.eq(e).clone());var f=c.eq(e).attr("data-id");a+=c.eq(e).height();c.eq(e).remove();var d=b.parent("ul").find('[data-parent="'+f+'"]');clone_item(b,d)});$(".ui-state-highlight").css("height",a+"px")}function create_category_option(c,b,e){var d="";for(i=0;i<e;i++){d+="|－"}var a=$('<option value="'+c.CATEGORY_ID+'">'+d+c.CATEGORY_NAME+"</option>");if(b==c.CATEGORY_ID){a.attr("selected",true)}return a}function create_category_select(b,a,c){var c=c==undefined?0:c;b.map(function(e,d){var f=create_category_option(e,a,c);f.appendTo($("select.category"));if(e.CHILD!=""){create_category_select(e.CHILD,a,c+1)}})}$(document).ready(function(){$("body>.nav").find("a").map(function(b){if($("body>.nav").find("a").eq(b).attr("href")==location.pathname){var a=$("body>.nav").find("a").eq(b).parents("li");a.addClass("active");if(a.length>1){a.eq(a.length-1).find("span.glyphicon").addClass("glyphicon-minus").removeClass("glyphicon-plus")}}});$(".alert .close").on("click",function(){$(".alert").removeClass("in").addClass("out")});$(".header .menu a.btn").on("click",function(){var a=$("body>.nav");if(a.hasClass("out")){$("body>.container-fluid").removeClass("full");a.addClass("in").removeClass("out")}else{$("body>.container-fluid").addClass("full");a.addClass("out").removeClass("in")}});$("body>.nav li").on("click",function(){var a=$(this).find(".sub-nav");if(a.length>0){if($(this).hasClass("active")){a.hide();$(this).removeClass("active");$(this).find("span.glyphicon").addClass("glyphicon-plus").removeClass("glyphicon-minus")}else{a.show();$(this).addClass("active");$(this).find("span.glyphicon").addClass("glyphicon-minus").removeClass("glyphicon-plus")}}})});